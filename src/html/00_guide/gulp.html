<!DOCTYPE HTML>
<html lang="ko">
<include src="../include/head.html" title="GULP | UI Template">
  <style type="text/css">
  </style>
</include>
<body id="body" class="guide">
<include src="include/quick.html"></include>
<h1>GOM & Company Gulp 세팅</h1>
<nav>
  <ul>
    <li><a href="#new">신규 프로젝트 세팅</a></li>
    <li><a href="#old">기존 프로젝트 세팅</a></li>
    <li><a href="#gulp">Gulp Guide</a></li>
  </ul>
</nav>
<section class="container">
  <article id="new" class="cont">
    <h2>🥤 신규 프로젝트 세팅</h2>
    <h3>01. Node.js 설치</h3>
    <a href="https://nodejs.org/ko/" target="_blank">https://nodejs.org/ko/</a> 설치 후 npm -v 으로 버전 확인
    <p>현재 사용 버전 : v8.10.0</p>
    <h3>02. gitlab</h3>
    <ul class="list">
      <li>1) <a href="https://gitlab.gomtv.com/ui/ui_template" target="_blank">https://gitlab.gomtv.com/ui/ui_template</a>에서 fork떠 신규 프로젝트 생성</li>
      <li>2) fork뜬 프로젝트의 setting 페이지에서 General project settings에서 프로젝트 이름과 설명을 변경</li>
      <li>2-1) Advanced settings에서 Remove fork relationship를 눌러서 fork 연결을 해지 한다.</li>
      <li>3) 새로 생성한 프로젝트 로컬에 clone <p class="desc"> 방법은 <a href="#">gitlab 가이드</a> 참고</p></li>
      <li>4) 필요없는 폴더 및 파일은 모두 지우고, gulpfile.js 및 기타 파일을 해당 프로젝트에 맞게 작업 환경 세팅</li>
      <li>
        5) terminal 에서 <span class="gom">npm install</span> 입력
        <p class="desc"> ackage.json에 이미 세팅을 해서, 필요한 모듈만 설치해 준다.</p>
        <p class="desc"> gulp는 3.9.1 설치해야 한다. 4이상을 설치시 바벨 때문에 오류 남. 추후에 개발환경을 변경 할 수 있음</p>
      </li>
      <li>6) terminal 에서 <span class="gom">gulp</span> 입력<p class="desc">gulp 실행</p></li>
      <li>4) readme.md에 새로운 프로젝트 가이드 작성</li>
    </ul>
  </article>
  <article id="old" class="cont">
    <h2>🥤 기존 프로젝트 세팅</h2>
    <ul class="list">
      <li>1) <a href="https://gitlab.gomtv.com/dashboard/groups" target="_blank">https://gitlab.gomtv.com/dashboard/groups</a>에서 원하는 프로젝트 선택</li>
      <li>2) 프로젝트를 로컬에 clone <p class="desc"> 방법은 <a href="#">gitlab 가이드</a> 참고</p></li>
      <li>3) terminal 에서 <span class="gom">npm install</span> 입력<br><span class="desc">package.json에 이미 세팅을 해서, 필요한 모듈만 설치해 준다.</span></li>
      <li>4) terminal 에서 <span class="gom">gulp</span> 입력<br><span class="desc">gulp 실행</span></li>
      <li>5) readme.md에 가이드 및 모듈 페이지 확인 후 작업</li>
    </ul>
  </article>
  <article id="gulp" class="cont">
    <h2>🥤 Gulp Guide</h2>
    <h3>1. gulp 사용 이유</h3>
    <ul class="list">
      <li>퍼블리싱 작업중에서 일일히 수작업으로 하기에 귀찮은 작업들이 너무 많다.</li>
      <li>압축하거나 html 코드 include, scss, 브라우저 리로딩 등등..</li>
      <li>이런 모든 귀찮은 작업을 gulp.js 를 이용하면 자동으로 해준다는 사실!</li>
      <li>gulp는 편리한 전처리 도구이다. 무엇보다 문법이 쉬어서 빠르게 습득할 수 있는 장점이 있다.</li>
    </ul>
    <h3>2. gulp 설치</h3>
    <ul class="list">
      <li>1) gulp를 사용하려면 반드시 node.js 설치해야 한다. node.js 사이트에 접속해서 다운받고 설치 한다.</li>
      <li>
        2) gulp 를 전역에 설치하기
        <p class="desc">
          package.json 참고 : <a href="https://elegantcoder.com/beginning-npm-package/" target="_blank">https://elegantcoder.com/beginning-npm-package/</a>
        </p>
<pre class="code">
# gulp를 전역에 설치하기
$ npm install -g gulp
# 프로젝트 폴더에 package.json 만들기
$ npm init
</pre>
      </li>
    </ul>
    <h3>3. 디렉토리 구조</h3>
<pre class="code">
project_name
    ├── dist
            ├── css
            ├── img
            ├── html
            └── js
    ├── node_modules
    ├── src
        ├── scss
            └── style.scss
        ├── img
         	├── image.png
         	├── sprite
            └── sprite_image.png
        ├── html
            ├── index.html
            └── include
                └── head.html
        └── js
            └── ui.js
    ├── gulpfile.js
    └── package.json
</pre>
    <h3>4. gulpfile.js 정의</h3>
    <ul class="list">
      <li>gulpfile.js에서 gulp 플러그인 활용을 정의한다.</li>
      <li>아래 모듈 외에 추가를 원하는 모듈은 설치 후 package.json에 추가하면 된다.</li>
      <li>gulp spritesmith를 사용하면 스프라이트 이미지와 css를 자동으로 생성해준다.<br>설정은  sprite.css.handlebars로 할수있다.
        <span class="desc">추가할때마다 달라져서 현재는 잘 사용안함</span>
      </li>
    </ul>
<pre class="code">
<strong class="blue">gulpfile.js</strong>
<span class="blue">var</span> gulp = require('gulp'),
    browserSync = require('browser-sync').create(),
    html = require('gulp-html-tag-include'),
    sass = require('gulp-sass'),
    autoprefixer = require('gulp-autoprefixer'),
    sourcemaps = require('gulp-sourcemaps'),
    uglify = require('gulp-uglify');
  var gulp = require('gulp'),
    		sass = require('gulp-sass'),
    		autoprefixer = require('gulp-autoprefixer'),
    		sourecemaps = require('gulp-sourcemaps'),
    		browserSync = require('browser-sync'),
    		html = require('gulp-html-tag-include'),
    		spritesmith = require('gulp.spritesmith'),
    		watch = require('gulp-watch'),
    		concat = require('gulp-concat'),
    		babel = require('gulp-babel'),
    		uglify = require('gulp-uglify-es').default, // es6용
        gutil  = require('gulp-util'),
        rename = require('gulp-rename');

    /*=============================
     @Path 정의
     ==============================*/
    var paths = {
     	port:3000,
    	input: 'src/**/*',
    	output: 'dist/',
    	style: {
    		input: 'src/scss/*.scss',
    		output: 'dist/css/'
    	},
    	...
    };
    ...
    // browser-sync
    gulp.task('browserSync', function () {
        console.log("gulp 시작!!");
        browserSync.init({
            port:paths.port,            // port: 3000
            server:{
                baseDir: paths.html.output
            },
            startPath:'./html/index.html'
        })
    });
    gulp.task('watch', ['html-include','sass','js','img'], function() {
      gulp.watch(paths.style.input, ['sass']);
      gulp.watch(paths.html.input, ['html-include']);
      gulp.watch(paths.js.input, ['js']);
    });

    gulp.task('default',['browserSync','watch']);
</pre>

<pre class="code">
  <strong class="blue">sprite.css.handlebars</strong>
  .spurl {
    	display:inline-block;
    	background-image: url($url +'sprite.png');
    	background-repeat:no-repeat;
    }
    {{#sprites}}
    	%{{name}} {
    		width: {{px.width}};
    		height: {{px.height}};
    		background-position:{{px.offset_x}} {{px.offset_y}};
    		content:"";
    		@extend .spurl;
    	}
    	.{{name}}{
    		width: {{px.width}};
    		height: {{px.height}};
    		background-position:{{px.offset_x}} {{px.offset_y}};
    		@extend .spurl;
    		@include blind_txt;
    		overflow: hidden;
    	}
    {{/sprites}}
</pre>
  </article>
</section>
<footer id="footer"></footer>
</body>
</html>